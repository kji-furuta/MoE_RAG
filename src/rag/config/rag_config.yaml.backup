document_processing:
  chunking:
    chunk_size: 512
    min_chunk_size: 100
    overlap: 128
    semantic:
      model: ja_core_news_lg
      threshold: 0.7
    strategy: semantic
  ocr:
    gpu: true
    languages:
    - ja
    - en
  pdf_parser:
    dpi: 300
    extract_images: true
    extract_tables: true
embedding:
  batch_size: 32
  device: cuda
  embedding_dim: 1024
  max_length: 512
  model_name: intfloat/multilingual-e5-large
  normalize_embeddings: true
evaluation:
  metrics:
  - accuracy
  - citation_accuracy
  - response_time
  - relevance_score
  test_dataset_path: ./data/rag_documents/test_queries.json
llm:
  base_model: cyberagent/calm3-22b-chat
  device_map: auto
  finetuned_model_path: ./outputs/latest
  load_in_8bit: true
  max_memory:
    0: 36GB
    1: 36GB
  max_new_tokens: 512
  model_name: ollama:deepseek-32b-finetuned
  model_path: outputs/merged_model
  moe_experts_per_token: 2
  moe_model_path: /workspace/outputs/moe_d63ec0db-4f34-48d2-89c1-35b485a819f1
  moe_num_experts: 2
  ollama_host: http://localhost:11434
  ollama_model: deepseek-32b-finetuned
  quantization:
    compute_type: float16
    enabled: true
    method: q4_k_m
  repetition_penalty: 1.1
  temperature: 0.1
  top_p: 0.95
  torch_dtype: float16
  use_finetuned: false
  use_moe: false
  use_ollama_fallback: true
performance:
  batch_processing:
    batch_size: 50
    enabled: true
  cache:
    enabled: true
    max_size: 1000
    ttl: 3600
  parallel_processing:
    max_workers: 4
retrieval:
  hybrid_search:
    enabled: true
    keyword_weight: 0.3
    vector_weight: 0.7
  metadata_filters:
  - document_type
  - version
  - chapter
  - section
  rerank_top_k: 5
  reranking:
    enabled: true
    model: cross-encoder/ms-marco-MiniLM-L-12-v2
  top_k: 10
security:
  auth:
    enabled: false
  document_access:
    check_permissions: false
  logging:
    anonymize_pii: false
    log_queries: true
    log_responses: true
specialized:
  citation:
    include_page_numbers: true
    include_section_numbers: true
    max_citation_length: 256
  numerical_processing:
    extract_units: true
    normalize_units: true
    unit_mapping:
      "\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB": km
      "\u30D1\u30FC\u30BB\u30F3\u30C8": '%'
      "\u30E1\u30FC\u30C8\u30EB": m
  version_control:
    enabled: true
    track_changes: true
system:
  gpu_memory_fraction: 0.95
  language: ja
  log_level: INFO
  memory_optimization: true
  name: "\u571F\u6728\u9053\u8DEF\u8A2D\u8A08\u7279\u5316\u578BRAG\u30B7\u30B9\u30C6\
    \u30E0"
  use_dual_gpu: true
  version: 1.0.0
ui:
  features:
    batch_query: true
    export_results: true
    file_upload: true
    version_selection: true
  streamlit:
    max_upload_size: 200
    port: 8051
    theme: dark
vector_store:
  qdrant:
    collection_name: road_design_docs
    prefer_grpc: false
    timeout: 60
    url: http://qdrant:6333
    vector_dim: 1024
  type: qdrant
